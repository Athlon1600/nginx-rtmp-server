version: "3.9"
services:
  rtmp:
    container_name: 'rtmp'
    build: './rtmp'
    ports:
      - '1935:1935'
      - '80:80'
#    volumes:
#      - ./tmp:/tmp
#      - ./rtmp/html:/usr/local/nginx/html
  api_server:
    container_name: 'api_server'
    build: './api_server'
    ports:
      - '3000:3000'
    #    volumes:
    #      - ./express:/app
    #      - /app/node_modules
    environment:
      - NODE_ENV=production
      #      - PORT=3000
      #      - STREAM_KEY=china
      - RTMP_SERVER=rtmp